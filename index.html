<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPA Perfect Platform 2027</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background-color: #f3f4f6; transition: background-color 0.3s; }
        .tab-content { display: none; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        .card { background: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); padding: 1.5rem; margin-bottom: 1.5rem; transition: transform 0.2s; }
        .card:hover { transform: translateY(-2px); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Dark Mode Support */
        body.dark-mode { background-color: #1a202c; color: #e2e8f0; }
        body.dark-mode .card { background-color: #2d3748; color: #e2e8f0; }
        body.dark-mode nav { background-color: #2d3748; }
        body.dark-mode nav button:hover { background-color: #4a5568; }
        body.dark-mode .text-gray-600 { color: #a0aec0; }
        body.dark-mode .text-gray-700 { color: #cbd5e0; }
        body.dark-mode .text-gray-800 { color: #f7fafc; }
        body.dark-mode input, body.dark-mode select { background-color: #4a5568; border-color: #718096; color: white; }
        body.dark-mode table thead tr { background-color: #4a5568; }
        body.dark-mode table tbody tr:hover { background-color: #2d3748; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen text-gray-800">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <header class="mb-8 flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600">CPA Perfect Platform</h1>
                <p class="text-gray-600 mt-1">Goal: 2027 May Short & Aug Essay</p>
            </div>
            <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-200 transition">
                <i class="fas fa-moon text-xl text-gray-600"></i>
            </button>
        </header>

        <!-- Navigation Tabs -->
        <nav class="flex mb-8 bg-white rounded-xl shadow-sm p-1 overflow-x-auto">
            <button onclick="switchTab('dashboard')" class="flex-1 py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none font-medium text-gray-500 transition" id="tab-dashboard"><i class="fas fa-tachometer-alt mr-2"></i>Dashboard</button>
            <button onclick="switchTab('timer')" class="flex-1 py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none font-medium text-gray-500 transition" id="tab-timer"><i class="fas fa-stopwatch mr-2"></i>Study Timer</button>
            <button onclick="switchTab('schedule')" class="flex-1 py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none font-medium text-gray-500 transition" id="tab-schedule"><i class="fas fa-calendar-alt mr-2"></i>Mock Exams</button>
            <button onclick="switchTab('scores')" class="flex-1 py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none font-medium text-gray-500 transition" id="tab-scores"><i class="fas fa-chart-line mr-2"></i>Scores</button>
            <button onclick="switchTab('drills')" class="flex-1 py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none font-semibold text-gray-500 transition" id="tab-drills"><i class="fas fa-pencil-alt mr-2"></i>Drills <span class="bg-red-500 text-white text-xs px-2 py-0.5 rounded-full ml-1">NEW</span></button>
            <button onclick="switchTab('roadmap')" class="flex-1 py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none font-medium text-gray-500 transition" id="tab-roadmap"><i class="fas fa-map mr-2"></i>Roadmap</button>
            <button onclick="switchTab('jobhunting')" class="flex-1 py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none font-medium text-gray-500 transition" id="tab-jobhunting"><i class="fas fa-briefcase mr-2"></i>Job Hunting</button>
        </nav>

        <!-- Tab: Job Hunting -->
        <div id="jobhunting" class="tab-content">
            <div class="card">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-white">ğŸ¢ Big 4 CPA Job Hunting Strategy</h2>
                
                <div class="mb-8">
                    <h3 class="text-xl font-bold mb-4 text-blue-600">ğŸ“… Strategy & Timeline</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white dark:bg-gray-800 rounded-lg overflow-hidden">
                            <thead class="bg-gray-100 dark:bg-gray-700">
                                <tr>
                                    <th class="py-3 px-4 text-left font-semibold text-gray-600 dark:text-gray-200">Period</th>
                                    <th class="py-3 px-4 text-left font-semibold text-gray-600 dark:text-gray-200">Activity</th>
                                    <th class="py-3 px-4 text-left font-semibold text-gray-600 dark:text-gray-200">Details</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="py-3 px-4">August (Late)</td>
                                    <td class="py-3 px-4 font-medium">Essay Exam Ends</td>
                                    <td class="py-3 px-4 text-gray-500">Rest for a few days, then prepare for briefings.</td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">September</td>
                                    <td class="py-3 px-4 font-medium">Firm Briefings</td>
                                    <td class="py-3 px-4 text-gray-500">Attend online/offline sessions. Key for networking.</td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">October</td>
                                    <td class="py-3 px-4 font-medium">Entry Sheet (ES)</td>
                                    <td class="py-3 px-4 text-gray-500">Prepare resumes. Focus on 'Why this firm?'</td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">November (Mid)</td>
                                    <td class="py-3 px-4 font-medium">Results Announcement</td>
                                    <td class="py-3 px-4 text-gray-500">Official passing results released.</td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">November (Late)</td>
                                    <td class="py-3 px-4 font-medium">Interviews & Offers</td>
                                    <td class="py-3 px-4 text-gray-500">Intensive interview period. Offers issued quickly.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-bold mb-4 text-blue-600">ğŸ“Š Big 4 Comparison</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Deloitte -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-xl p-6 hover:shadow-lg transition">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="text-lg font-bold">Deloitte Tohmatsu</h4>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Deloitte</span>
                                </div>
                                <a href="https://www2.deloitte.com/jp/ja/pages/audit/topics/recruit-index.html" target="_blank" class="text-blue-500 hover:text-blue-700"><i class="fas fa-external-link-alt"></i></a>
                            </div>
                            <p class="text-sm text-gray-600 mb-2"><strong>Strengths:</strong> Largest scale, aggressive growth, strong in IPOs.</p>
                            <p class="text-sm text-gray-600"><strong>Culture:</strong> Meritocratic, Sports-oriented, High energy.</p>
                        </div>
                        
                        <!-- KPMG -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-xl p-6 hover:shadow-lg transition">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="text-lg font-bold">KPMG AZSA</h4>
                                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">KPMG</span>
                                </div>
                                <a href="https://home.kpmg/jp/ja/home/careers.html" target="_blank" class="text-blue-500 hover:text-blue-700"><i class="fas fa-external-link-alt"></i></a>
                            </div>
                            <p class="text-sm text-gray-600 mb-2"><strong>Strengths:</strong> Balanced portfolio, strong domestic manufacturing.</p>
                            <p class="text-sm text-gray-600"><strong>Culture:</strong> Conservative, Collaborative, 'Gentlemanly'.</p>
                        </div>

                        <!-- EY -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-xl p-6 hover:shadow-lg transition">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="text-lg font-bold">EY ShinNihon</h4>
                                    <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">EY</span>
                                </div>
                                <a href="https://www.ey.com/ja_jp/careers/audit" target="_blank" class="text-blue-500 hover:text-blue-700"><i class="fas fa-external-link-alt"></i></a>
                            </div>
                            <p class="text-sm text-gray-600 mb-2"><strong>Strengths:</strong> Long history, large client base, Digital Audit.</p>
                            <p class="text-sm text-gray-600"><strong>Culture:</strong> Traditional yet transforming, Diversity focus.</p>
                        </div>

                        <!-- PwC -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-xl p-6 hover:shadow-lg transition">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="text-lg font-bold">PwC Aarata</h4>
                                    <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded">PwC</span>
                                </div>
                                <a href="https://www.pwc.com/jp/ja/careers/audit.html" target="_blank" class="text-blue-500 hover:text-blue-700"><i class="fas fa-external-link-alt"></i></a>
                            </div>
                            <p class="text-sm text-gray-600 mb-2"><strong>Strengths:</strong> Global integration, Advisory connection.</p>
                            <p class="text-sm text-gray-600"><strong>Culture:</strong> Global, Flat hierarchy, Innovative.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Drills -->
        <div id="drills" class="tab-content active">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Sidebar -->
                <div class="card md:col-span-1">
                    <h2 class="text-xl font-bold mb-4">Select Topic</h2>
                    <div class="space-y-2">
                        <button onclick="selectSubject('Financial')" class="w-full text-left px-4 py-3 rounded-lg bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium transition flex justify-between items-center">
                            <span>Financial Accounting</span>
                            <i class="fas fa-chevron-right text-sm"></i>
                        </button>
                        <button onclick="selectSubject('Management')" class="w-full text-left px-4 py-3 rounded-lg bg-green-50 hover:bg-green-100 text-green-700 font-medium transition flex justify-between items-center">
                            <span>Management Accounting</span>
                            <i class="fas fa-chevron-right text-sm"></i>
                        </button>
                        <button onclick="selectSubject('Audit')" class="w-full text-left px-4 py-3 rounded-lg bg-yellow-50 hover:bg-yellow-100 text-yellow-700 font-medium transition flex justify-between items-center">
                            <span>Audit Theory</span>
                            <i class="fas fa-chevron-right text-sm"></i>
                        </button>
                        <button onclick="selectSubject('Company')" class="w-full text-left px-4 py-3 rounded-lg bg-purple-50 hover:bg-purple-100 text-purple-700 font-medium transition flex justify-between items-center">
                            <span>Company Law</span>
                            <i class="fas fa-chevron-right text-sm"></i>
                        </button>
                    </div>
                </div>

                <!-- Quiz Area -->
                <div class="card md:col-span-3 min-h-[400px]">
                    <div id="quiz-intro" class="text-center py-10">
                        <i class="fas fa-book-reader text-6xl text-gray-300 mb-4"></i>
                        <h2 class="text-2xl font-bold text-gray-700 mb-2">Ready to Practice?</h2>
                        <p class="text-gray-500">Select a subject from the left to start.</p>
                    </div>

                    <div id="level-selection" class="hidden text-center py-10">
                        <i class="fas fa-layer-group text-6xl text-blue-300 mb-4"></i>
                        <h2 class="text-2xl font-bold text-gray-700 mb-6" id="level-select-title">Select Level</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto px-4">
                            <button onclick="startQuiz(currentSubject, 1)" class="p-6 bg-white border-2 border-green-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition group">
                                <div class="text-green-600 font-bold text-xl mb-2">Level 1</div>
                                <div class="text-sm text-gray-500">Basic Definitions & Rules</div>
                                <div class="mt-2 text-xs bg-green-100 text-green-800 inline-block px-2 py-1 rounded">Beginner</div>
                            </button>
                            <button onclick="startQuiz(currentSubject, 2)" class="p-6 bg-white border-2 border-blue-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition group">
                                <div class="text-blue-600 font-bold text-xl mb-2">Level 2</div>
                                <div class="text-sm text-gray-500">Standard Calculations</div>
                                <div class="mt-2 text-xs bg-blue-100 text-blue-800 inline-block px-2 py-1 rounded">Intermediate</div>
                            </button>
                            <button onclick="startQuiz(currentSubject, 3)" class="p-6 bg-white border-2 border-purple-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition group">
                                <div class="text-purple-600 font-bold text-xl mb-2">Level 3</div>
                                <div class="text-sm text-gray-500">Advanced Theory & App.</div>
                                <div class="mt-2 text-xs bg-purple-100 text-purple-800 inline-block px-2 py-1 rounded">Advanced</div>
                            </button>
                            <button onclick="startQuiz(currentSubject, 'vocab')" class="p-6 bg-white border-2 border-yellow-200 rounded-xl hover:border-yellow-500 hover:bg-yellow-50 transition group">
                                <div class="text-yellow-600 font-bold text-xl mb-2">Vocabulary</div>
                                <div class="text-sm text-gray-500">Key Terms (JP/EN)</div>
                                <div class="mt-2 text-xs bg-yellow-100 text-yellow-800 inline-block px-2 py-1 rounded">Flashcards</div>
                            </button>
                        </div>
                        <button onclick="resetQuizUI()" class="mt-8 text-gray-500 hover:text-gray-700 underline">Cancel</button>
                    </div>

                    <div id="quiz-container" class="hidden">
                        <div class="flex justify-between items-center mb-6 pb-4 border-b">
                            <h3 class="text-xl font-bold text-gray-800" id="quiz-subject-title">Subject</h3>
                            <span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800" id="quiz-progress">Q1 / 5</span>
                        </div>
                        
                        <div class="mb-8">
                            <p class="text-lg text-gray-800 dark:text-gray-200 leading-relaxed mb-6" id="quiz-question-text">Question goes here...</p>
                            
                            <div class="space-y-3" id="quiz-options">
                                <!-- Options injected here -->
                            </div>
                        </div>

                        <div id="quiz-feedback" class="hidden mb-6 p-4 rounded-lg bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600">
                            <h4 class="font-bold mb-2" id="feedback-title">Correct!</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300" id="feedback-text">Explanation...</p>
                        </div>

                        <div class="flex justify-end">
                            <button id="btn-next-question" onclick="nextQuestion()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition hidden">Next Question <i class="fas fa-arrow-right ml-2"></i></button>
                        </div>
                    </div>

                    <div id="quiz-result" class="hidden text-center py-10">
                        <div class="mb-6">
                            <i class="fas fa-trophy text-6xl text-yellow-400 mb-4 animate-bounce"></i>
                            <h2 class="text-3xl font-bold text-gray-800 mb-2">Quiz Completed!</h2>
                            <p class="text-xl text-gray-600">Your Score: <span id="quiz-final-score" class="font-bold text-blue-600">4/5</span></p>
                        </div>
                        <button onclick="resetQuizUI()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg transition">Back to Menu</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="dashboard" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Countdowns -->
                <div class="card md:col-span-2">
                    <h2 class="text-xl font-bold mb-4 flex items-center"><i class="fas fa-hourglass-half mr-2 text-blue-500"></i>Exam Countdown</h2>
                    <div id="countdown-list" class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <!-- Injected via JS -->
                    </div>
                </div>
                
                <!-- Total Study Time -->
                <div class="card bg-gradient-to-br from-blue-500 to-indigo-600 text-white">
                    <h2 class="text-xl font-bold mb-2">Total Study Time</h2>
                    <div class="text-4xl font-bold mb-1" id="total-study-time">0h 0m</div>
                    <p class="text-blue-100 text-sm">Keep pushing!</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                <!-- Subject Radar Chart -->
                <div class="card">
                    <h2 class="text-xl font-bold mb-4">Skill Balance (Radar)</h2>
                    <canvas id="radarChart" height="250"></canvas>
                </div>
                <!-- Phase Progress -->
                <div class="card">
                    <h2 class="text-xl font-bold mb-4">Current Phase: Foundation</h2>
                    <div class="prose prose-sm max-w-none text-gray-600 mb-4">
                        <ul class="list-disc pl-5">
                            <li>Focus: Financial & Management Accounting Calculation</li>
                            <li>Goal: Complete basic lectures by Aug 2026</li>
                            <li>Next Milestone: Dec 2026 Short Exam</li>
                        </ul>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                        <div class="bg-green-500 h-4 rounded-full transition-all duration-1000" style="width: 15%"></div>
                    </div>
                    <p class="text-xs text-right mt-1 text-gray-500">15% Complete</p>
                </div>
            </div>
        </div>

        <!-- Tab: Study Timer -->
        <div id="timer" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card text-center">
                    <h2 class="text-2xl font-bold mb-6">Focus Timer</h2>
                    <div class="text-6xl font-mono font-bold text-gray-800 mb-8" id="timer-display">00:00:00</div>
                    
                    <div class="flex justify-center space-x-4 mb-6">
                        <button onclick="startTimer()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105" id="btn-start"><i class="fas fa-play mr-2"></i>Start</button>
                        <button onclick="pauseTimer()" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105 hidden" id="btn-pause"><i class="fas fa-pause mr-2"></i>Pause</button>
                        <button onclick="stopTimer()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105" id="btn-stop"><i class="fas fa-stop mr-2"></i>Log & Reset</button>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                        <select id="timer-subject" class="block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                            <option value="Financial">Financial Accounting (è²¡å‹™)</option>
                            <option value="Management">Management Accounting (ç®¡ç†)</option>
                            <option value="Audit">Audit (ç›£æŸ»)</option>
                            <option value="Company">Company Law (ä¼æ¥­)</option>
                            <option value="Tax">Tax Law (ç§Ÿç¨)</option>
                            <option value="Elective">Elective (é¸æŠ)</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <h2 class="text-xl font-bold mb-4">Recent Logs</h2>
                    <div class="overflow-y-auto max-h-80">
                        <table class="min-w-full text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left">Date</th>
                                    <th class="px-4 py-2 text-left">Subject</th>
                                    <th class="px-4 py-2 text-right">Duration</th>
                                </tr>
                            </thead>
                            <tbody id="timer-logs-body">
                                <!-- Logs injected via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Mock Exams -->
        <div id="schedule" class="tab-content">
            <div class="card">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold">Mock Exam Schedule (2026-2027 Forecast)</h2>
                    <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">Estimated Dates</span>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full table-auto">
                        <thead>
                            <tr class="bg-gray-50 text-left border-b">
                                <th class="px-4 py-3">Date</th>
                                <th class="px-4 py-3">Type</th>
                                <th class="px-4 py-3">Exam Name</th>
                                <th class="px-4 py-3">Provider</th>
                                <th class="px-4 py-3">Status</th>
                            </tr>
                        </thead>
                        <tbody id="schedule-table-body" class="text-gray-700">
                            <!-- JS injected -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tab: Scores -->
        <div id="scores" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Input Form -->
                <div class="card col-span-1 border-t-4 border-blue-500">
                    <h2 class="text-lg font-bold mb-4">Record Score</h2>
                    <form id="score-form" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Exam/Drill Name</label>
                            <input type="text" id="score-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" placeholder="e.g. Access Alpha #1">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Date</label>
                            <input type="date" id="score-date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Subject</label>
                            <select id="score-subject" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                                <option value="Financial">Financial (è²¡å‹™)</option>
                                <option value="Management">Management (ç®¡ç†)</option>
                                <option value="Audit">Audit (ç›£æŸ»)</option>
                                <option value="Company">Company (ä¼æ¥­)</option>
                                <option value="Tax">Tax (ç§Ÿç¨)</option>
                                <option value="Elective">Elective (é¸æŠ)</option>
                                <option value="Total">Total/Avg (ç·åˆ)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Score (%)</label>
                            <input type="number" id="score-val" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" placeholder="70">
                        </div>
                        <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition font-bold">Save Score</button>
                    </form>
                </div>
                <!-- Chart & List -->
                <div class="card col-span-2">
                    <h2 class="text-lg font-bold mb-4">Performance History</h2>
                    <canvas id="scoreChart" height="200"></canvas>
                    <div class="mt-6 overflow-x-auto">
                        <table class="min-w-full text-sm">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-2">Date</th>
                                    <th class="text-left py-2">Exam</th>
                                    <th class="text-left py-2">Subject</th>
                                    <th class="text-left py-2">Score</th>
                                    <th class="text-left py-2">Action</th>
                                </tr>
                            </thead>
                            <tbody id="score-list-body">
                                <!-- Scores injected via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Roadmap -->
        <div id="roadmap" class="tab-content">
            <div class="card">
                <div id="roadmap-content" class="prose max-w-none text-gray-700">
                    <!-- Markdown content injected via JS -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Data Management ---
        const DB_KEY_SCORES = 'cpa_scores_v2';
        const DB_KEY_LOGS = 'cpa_logs_v1';
        
        // Mock Data - Estimated based on typical schedules (2nd Sunday for Short, Late Aug for Essay)
        const mockExams = [
            { date: '2026-11-15', type: 'Short', name: 'Dec Short Mock (TAC/Ohara)', provider: 'TAC/Ohara', status: 'Practice' },
            { date: '2026-12-13', type: 'Short', name: 'Official Dec Short Exam', provider: 'CPAAOB', status: 'Target' },
            { date: '2027-04-25', type: 'Short', name: 'May Short Mock (TAC/Ohara)', provider: 'TAC/Ohara', status: 'Practice' },
            { date: '2027-05-23', type: 'Short', name: 'Official May Short Exam', provider: 'CPAAOB', status: 'Target' },
            { date: '2027-07-10', type: 'Essay', name: 'Essay Mock (TAC/Ohara)', provider: 'TAC/Ohara', status: 'Practice' },
            { date: '2027-08-20', type: 'Essay', name: 'Official Aug Essay Exam', provider: 'CPAAOB', status: 'Target' }
        ];

        const roadmapMarkdown = `# CPA 1.5 Year Strategy Roadmap

## Phase 0: Foundation (2026)
* **Feb - Mar**: Build study habits. Focus on Fin/Mgmt Accounting basics.
* **Apr - Jun**: Start Applied theory. Begin Audit & Company Law.
* **Jul - Sep**: **CRITICAL** Start Tax Law & Electives.
* **Oct - Dec**: **Dec Short Exam Challenge**. Aim to pass!

## Phase 1: Short Exam Mastery (Jan - May 2027)
* **Jan - Mar**: Solidify basics. 75%+ in drills.
* **Apr - May**: Peak conditioning. Rote memorization.

## Phase 2: Essay Sprint (Jun - Aug 2027)
* **Jun**: Revive Tax/Elective knowledge.
* **Jul**: Output training (Writing).
* **Aug**: Final adjustments.`;

        // --- State ---
        let scores = JSON.parse(localStorage.getItem(DB_KEY_SCORES)) || [];
        let logs = JSON.parse(localStorage.getItem(DB_KEY_LOGS)) || [];
        let timerInterval = null;
        let timerSeconds = 0;
        let isTimerRunning = false;

        let scoreChart = null;
        let radarChart = null;

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderSchedule();
            renderCountdowns();
            renderRoadmap();
            renderScores();
            renderLogs();
            updateTotalTime();
            
            // Set default date to today
            document.getElementById('score-date').valueAsDate = new Date();
        });

        // --- Tabs ---
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            
            document.querySelectorAll('nav button').forEach(el => {
                el.classList.remove('text-blue-600', 'bg-blue-50');
                el.classList.add('text-gray-500');
            });
            const activeBtn = document.getElementById('tab-' + tabId);
            activeBtn.classList.add('text-blue-600', 'bg-blue-50');
            activeBtn.classList.remove('text-gray-500');
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        // --- Dashboard ---
        function renderCountdowns() {
            const container = document.getElementById('countdown-list');
            const targets = [
                { name: 'Dec 2026 Short', date: new Date('2026-12-13') },
                { name: 'May 2027 Short', date: new Date('2027-05-23') },
                { name: 'Aug 2027 Essay', date: new Date('2027-08-20') }
            ];
            
            const now = new Date();
            
            targets.forEach(target => {
                const diffTime = target.date - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                const el = document.createElement('div');
                el.className = 'flex flex-col p-4 bg-white dark:bg-gray-800 rounded-lg shadow border-l-4 border-blue-500 text-center';
                el.innerHTML = `
                    <span class="text-sm text-gray-500 uppercase tracking-wide">${target.name}</span>
                    <span class="text-3xl font-bold text-gray-800 dark:text-white mt-1">${diffDays > 0 ? diffDays : 0}</span>
                    <span class="text-xs text-gray-400">Days Left</span>
                `;
                container.appendChild(el);
            });
        }

        // --- Timer Logic ---
        function formatTime(totalSeconds) {
            const h = Math.floor(totalSeconds / 3600).toString().padStart(2, '0');
            const m = Math.floor((totalSeconds % 3600) / 60).toString().padStart(2, '0');
            const s = (totalSeconds % 60).toString().padStart(2, '0');
            return `${h}:${m}:${s}`;
        }

        function startTimer() {
            if (isTimerRunning) return;
            isTimerRunning = true;
            document.getElementById('btn-start').classList.add('hidden');
            document.getElementById('btn-pause').classList.remove('hidden');
            
            timerInterval = setInterval(() => {
                timerSeconds++;
                document.getElementById('timer-display').textContent = formatTime(timerSeconds);
            }, 1000);
        }

        function pauseTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
            document.getElementById('btn-start').classList.remove('hidden');
            document.getElementById('btn-pause').classList.add('hidden');
        }

        function stopTimer() {
            if (timerSeconds < 60) {
                if(!confirm("Less than 1 minute. Log anyway?")) {
                    resetTimerUI();
                    return;
                }
            }
            
            const subject = document.getElementById('timer-subject').value;
            const log = {
                date: new Date().toISOString(),
                subject: subject,
                durationSeconds: timerSeconds
            };
            
            logs.unshift(log); // Add to beginning
            localStorage.setItem(DB_KEY_LOGS, JSON.stringify(logs));
            
            renderLogs();
            updateTotalTime();
            resetTimerUI();
        }

        function resetTimerUI() {
            isTimerRunning = false;
            clearInterval(timerInterval);
            timerSeconds = 0;
            document.getElementById('timer-display').textContent = "00:00:00";
            document.getElementById('btn-start').classList.remove('hidden');
            document.getElementById('btn-pause').classList.add('hidden');
        }

        function renderLogs() {
            const tbody = document.getElementById('timer-logs-body');
            tbody.innerHTML = '';
            logs.slice(0, 50).forEach(log => {
                const date = new Date(log.date).toLocaleString();
                const duration = Math.floor(log.durationSeconds / 60) + ' min';
                
                const row = document.createElement('tr');
                row.className = 'border-b dark:border-gray-700';
                row.innerHTML = `
                    <td class="px-4 py-2">${date}</td>
                    <td class="px-4 py-2 font-medium">${log.subject}</td>
                    <td class="px-4 py-2 text-right">${duration}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateTotalTime() {
            const totalSeconds = logs.reduce((acc, log) => acc + log.durationSeconds, 0);
            const hours = Math.floor(totalSeconds / 3600);
            const mins = Math.floor((totalSeconds % 3600) / 60);
            document.getElementById('total-study-time').textContent = `${hours}h ${mins}m`;
        }

        // --- Scores & Charts ---
        document.getElementById('score-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('score-name').value;
            const date = document.getElementById('score-date').value;
            const subject = document.getElementById('score-subject').value;
            const val = document.getElementById('score-val').value;
            
            if(name && date && val) {
                scores.push({ name, date, subject, val: parseInt(val) });
                localStorage.setItem(DB_KEY_SCORES, JSON.stringify(scores));
                renderScores();
                document.getElementById('score-form').reset();
                document.getElementById('score-date').valueAsDate = new Date();
            }
        });

        function deleteScore(index) {
            scores.splice(index, 1);
            localStorage.setItem(DB_KEY_SCORES, JSON.stringify(scores));
            renderScores();
        }

        function renderScores() {
            const tbody = document.getElementById('score-list-body');
            tbody.innerHTML = '';
            
            // Sort by date desc
            const sortedScores = [...scores].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedScores.forEach((s) => {
                // Find original index for deletion
                const originalIndex = scores.indexOf(s);
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700 transition';
                row.innerHTML = `
                    <td class="py-2">${s.date}</td>
                    <td class="py-2">${s.name}</td>
                    <td class="py-2"><span class="px-2 py-1 text-xs rounded bg-gray-200 dark:bg-gray-600">${s.subject}</span></td>
                    <td class="py-2 font-bold ${s.val >= 70 ? 'text-green-600' : 'text-orange-500'}">${s.val}%</td>
                    <td class="py-2"><button onclick="deleteScore(${originalIndex})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button></td>
                `;
                tbody.appendChild(row);
            });

            updateCharts();
        }

        function updateCharts() {
            updateLineChart();
            updateRadarChart();
        }

        function updateLineChart() {
            const ctx = document.getElementById('scoreChart').getContext('2d');
            if (scoreChart) scoreChart.destroy();
            
            // Group by subject
            const subjects = ['Financial', 'Management', 'Audit', 'Company', 'Tax', 'Elective', 'Total'];
            const datasets = subjects.map((sub, idx) => {
                const subScores = scores.filter(s => s.subject === sub).sort((a, b) => new Date(a.date) - new Date(b.date));
                if (subScores.length === 0) return null;
                
                const colors = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899', '#6B7280'];
                
                return {
                    label: sub,
                    data: subScores.map(s => ({ x: s.date, y: s.val })),
                    borderColor: colors[idx],
                    backgroundColor: colors[idx],
                    tension: 0.1,
                    pointRadius: 4
                };
            }).filter(ds => ds !== null);

            scoreChart = new Chart(ctx, {
                type: 'line',
                data: { datasets },
                options: {
                    responsive: true,
                    interaction: { mode: 'index', intersect: false },
                    scales: {
                        x: { type: 'category', title: { display: true, text: 'Date' } },
                        y: { beginAtZero: true, max: 100, title: { display: true, text: 'Score %' } }
                    }
                }
            });
        }

        function updateRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            if (radarChart) radarChart.destroy();

            const subjects = ['Financial', 'Management', 'Audit', 'Company', 'Tax', 'Elective'];
            const averages = subjects.map(sub => {
                const subScores = scores.filter(s => s.subject === sub);
                if (subScores.length === 0) return 0;
                const sum = subScores.reduce((a, b) => a + b.val, 0);
                return sum / subScores.length;
            });

            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: subjects,
                    datasets: [{
                        label: 'Average Score',
                        data: averages,
                        fill: true,
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgb(59, 130, 246)',
                        pointBackgroundColor: 'rgb(59, 130, 246)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(59, 130, 246)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
        }

        // --- Schedule & Roadmap Rendering ---
        function renderSchedule() {
            const tbody = document.getElementById('schedule-table-body');
            mockExams.forEach(exam => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700';
                
                let typeClass = exam.type === 'Short' ? 'bg-green-100 text-green-800' : 'bg-purple-100 text-purple-800';
                let statusClass = exam.status === 'Target' ? 'bg-red-100 text-red-800 font-bold' : 'bg-gray-100 text-gray-800';

                row.innerHTML = `
                    <td class="px-4 py-3">${exam.date}</td>
                    <td class="px-4 py-3"><span class="px-2 py-1 text-xs rounded-full ${typeClass}">${exam.type}</span></td>
                    <td class="px-4 py-3 font-medium">${exam.name}</td>
                    <td class="px-4 py-3 text-sm text-gray-500">${exam.provider}</td>
                    <td class="px-4 py-3"><span class="px-2 py-1 text-xs rounded-full ${statusClass}">${exam.status}</span></td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderRoadmap() {
            document.getElementById('roadmap-content').innerHTML = marked.parse(roadmapMarkdown);
        }

        // --- Drills Logic ---
        const drillQuestions = {
            'Financial': [
                {
                    level: 1,
                    q: "ç¾é‡‘é é‡‘: è²¸å€Ÿå¯¾ç…§è¡¨ã®ã€Œç¾é‡‘ã€ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["ç´™å¹£ (Bank notes)", "ç¡¬è²¨ (Coins)", "éƒµä¾¿åˆ‡æ‰‹ (Postage stamps)", "å½“åº§é é‡‘ (Demand deposits)"],
                    correct: 2,
                    explanation: "éƒµä¾¿åˆ‡æ‰‹ã¯ã€Œè²¯è”µå“ã€ã¾ãŸã¯ã€Œé€šä¿¡è²»ã€ã¨ã—ã¦å‡¦ç†ã•ã‚Œã€ç¾é‡‘ã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚ç¾é‡‘ã«ã¯é€šè²¨ã€å°åˆ‡æ‰‹ã€å½“åº§é é‡‘ãªã©ãŒå«ã¾ã‚Œã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "æ¸›ä¾¡å„Ÿå´: è³‡ç”£ã®åˆ©ç”¨é‡ã«åŸºã¥ã„ã¦æ¸›ä¾¡å„Ÿå´è²»ã‚’è¨ˆç®—ã™ã‚‹æ–¹æ³•ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["å®šé¡æ³• (Straight-line)", "å®šç‡æ³• (Declining-balance)", "ç”Ÿç”£é«˜æ¯”ä¾‹æ³• (Production-output)", "ç´šæ•°æ³• (Sum-of-the-years'-digits)"],
                    correct: 2,
                    explanation: "ç”Ÿç”£é«˜æ¯”ä¾‹æ³•ã¯ã€ç·è¦‹ç©ç”Ÿç”£é‡ã«å¯¾ã™ã‚‹å½“æœŸã®å®Ÿéš›ç”Ÿç”£é‡ã®å‰²åˆã«åŸºã¥ã„ã¦è²»ç”¨ã‚’é…åˆ†ã™ã‚‹æ–¹æ³•ã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "æ£šå¸è³‡ç”£: ç‰©ä¾¡ä¸Šæ˜‡å±€é¢ã«ãŠã„ã¦ã€å½“æœŸç´”åˆ©ç›ŠãŒæœ€ã‚‚å¤§ãããªã‚‹è©•ä¾¡æ–¹æ³•ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["å…ˆå…¥å…ˆå‡ºæ³• (FIFO)", "å¾Œå…¥å…ˆå‡ºæ³• (LIFO)", "ç§»å‹•å¹³å‡æ³• (Weighted Average)", "å€‹åˆ¥æ³• (Specific Identification)"],
                    correct: 0,
                    explanation: "å…ˆå…¥å…ˆå‡ºæ³•(FIFO)ã§ã¯ã€éå»ã®ï¼ˆå®‰ã„ï¼‰åœ¨åº«ãŒå…ˆã«å£²ä¸ŠåŸä¾¡ã¨ãªã‚Šã€æœŸæœ«åœ¨åº«ã«ç›´è¿‘ã®ï¼ˆé«˜ã„ï¼‰å˜ä¾¡ãŒæ®‹ã‚‹ãŸã‚ã€å£²ä¸ŠåŸä¾¡ãŒå°ã•ããªã‚Šåˆ©ç›ŠãŒå¤§ãããªã‚Šã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "è³‡ç”£é™¤å»å‚µå‹™: è³‡ç”£é™¤å»å‚µå‹™ã¯å½“åˆä½•ã‚’ã‚‚ã£ã¦æ¸¬å®šã•ã‚Œã¾ã™ã‹ï¼Ÿ",
                    options: ["é™¤å»è²»ç”¨ã®å°†æ¥ä¾¡å€¤", "é™¤å»è²»ç”¨ã®å‰²å¼•ç¾åœ¨ä¾¡å€¤", "è³‡ç”£ã®å–å¾—åŸä¾¡", "è³‡ç”£ã®å…¬æ­£ä¾¡å€¤"],
                    correct: 1,
                    explanation: "è³‡ç”£é™¤å»å‚µå‹™ã¯ã€å°†æ¥ç™ºç”Ÿã™ã‚‹ã¨è¦‹è¾¼ã¾ã‚Œã‚‹é™¤å»è²»ç”¨ã®ã€Œå‰²å¼•ç¾åœ¨ä¾¡å€¤ã€ã§ç®—å®šã•ã‚Œã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ä¸€èˆ¬åŸå‰‡: ä¼æ¥­ä¼šè¨ˆåŸå‰‡ã®ã€ŒçœŸå®Ÿæ€§ã®åŸå‰‡ã€ã«ãŠã‘ã‚‹ã€ŒçœŸå®Ÿã€ã®æ„å‘³ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["çµ¶å¯¾çš„çœŸå®Ÿ", "ç›¸å¯¾çš„çœŸå®Ÿ", "å½¢å¼çš„çœŸå®Ÿ", "æ³•çš„çœŸå®Ÿ"],
                    correct: 1,
                    explanation: "ä¼æ¥­ä¼šè¨ˆã¯è¤‡æ•°ã®ä¼šè¨ˆå‡¦ç†ã®åŸå‰‡ãƒ»æ‰‹ç¶šã®é¸æŠé©ç”¨ã‚’èªã‚ã¦ã„ã‚‹ãŸã‚ã€æ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã¯ã€Œç›¸å¯¾çš„çœŸå®Ÿã€ã§ã‚ã‚‹ã¨è§£ã•ã‚Œã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "æ¸›æä¼šè¨ˆ: å›ºå®šè³‡ç”£ã®ã€Œå›åå¯èƒ½ä¾¡é¡ã€ã¨ã¯ã€ã©ã®ã‚ˆã†ã«ç®—å®šã•ã‚Œã¾ã™ã‹ï¼Ÿ",
                    options: ["æ­£å‘³å£²å´ä¾¡é¡ã¨ä½¿ç”¨ä¾¡å€¤ã®ã„ãšã‚Œã‹é«˜ã„é‡‘é¡", "æ­£å‘³å£²å´ä¾¡é¡ã¨ä½¿ç”¨ä¾¡å€¤ã®ã„ãšã‚Œã‹ä½ã„é‡‘é¡", "æ­£å‘³å£²å´ä¾¡é¡ã®ã¿", "ä½¿ç”¨ä¾¡å€¤ã®ã¿"],
                    correct: 0,
                    explanation: "å›åå¯èƒ½ä¾¡é¡ã¯ã€è³‡ç”£ã®ã€Œæ­£å‘³å£²å´ä¾¡é¡ã€ã¨ã€Œä½¿ç”¨ä¾¡å€¤ã€ã®ã„ãšã‚Œã‹é«˜ã„æ–¹ã®é‡‘é¡ã¨ã•ã‚Œã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ãƒªãƒ¼ã‚¹ä¼šè¨ˆ: ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ãƒ»ãƒªãƒ¼ã‚¹å–å¼•ã«ãŠã„ã¦ã€å€Ÿæ‰‹ãŒè¨ˆä¸Šã™ã‚‹è³‡ç”£ã®é¡ã¯åŸå‰‡ã¨ã—ã¦ã„ãã‚‰ã§ã™ã‹ï¼Ÿ",
                    options: ["ãƒªãƒ¼ã‚¹æ–™ç·é¡", "ãƒªãƒ¼ã‚¹æ–™ç·é¡ã®å‰²å¼•ç¾åœ¨ä¾¡å€¤ã¨è²¸æ‰‹ã®è³¼å…¥ä¾¡é¡ç­‰ã®ã„ãšã‚Œã‹ä½ã„é¡", "è²¸æ‰‹ã®è³¼å…¥ä¾¡é¡", "ãƒªãƒ¼ã‚¹æ–™ç·é¡ã®å‰²å¼•ç¾åœ¨ä¾¡å€¤"],
                    correct: 1,
                    explanation: "é€šå¸¸ã®ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ãƒ»ãƒªãƒ¼ã‚¹ã§ã¯ã€ãƒªãƒ¼ã‚¹æ–™ç·é¡ã®ç¾åœ¨ä¾¡å€¤ã¨ã€è²¸æ‰‹ã®è³¼å…¥ä¾¡é¡ï¼ˆç¾é‡‘è³¼å…¥ä¾¡é¡ï¼‰ã®ã„ãšã‚Œã‹ä½ã„é¡ã§è³‡ç”£è¨ˆä¸Šã—ã¾ã™ã€‚"
                },
                {
                    level: 2,
                    q: "ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ãƒ•ãƒ­ãƒ¼è¨ˆç®—æ›¸: é–“æ¥æ³•ã«ãŠã„ã¦ã€ç¨å¼•å‰å½“æœŸç´”åˆ©ç›Šã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹éš›ã€æ¸›ä¾¡å„Ÿå´è²»ã¯ã©ã†èª¿æ•´ã—ã¾ã™ã‹ï¼Ÿ",
                    options: ["åŠ ç®—ã™ã‚‹", "æ¸›ç®—ã™ã‚‹", "èª¿æ•´ã—ãªã„", "å–¶æ¥­å¤–åç›Šã¨ã—ã¦æ‰±ã†"],
                    correct: 0,
                    explanation: "æ¸›ä¾¡å„Ÿå´è²»ã¯ç¾é‡‘æ”¯å‡ºã‚’ä¼´ã‚ãªã„è²»ç”¨ï¼ˆéè³‡é‡‘æç›Šï¼‰ã§ã‚ã‚‹ãŸã‚ã€åˆ©ç›Šã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ã‚’æ±‚ã‚ã‚‹éš›ã¯ã€ŒåŠ ç®—ã€ã—ã¦æˆ»ã—ã¾ã™ã€‚"
                },
                {
                    level: 3,
                    q: "ç¨åŠ¹æœä¼šè¨ˆ: ç¹°å»¶ç¨é‡‘è³‡ç”£ã®å›åå¯èƒ½æ€§ã‚’åˆ¤æ–­ã™ã‚‹éš›ã€ä¼šç¤¾åˆ†é¡ãŒã€Œåˆ†é¡2ã€ã®ä¼æ¥­ã«ãŠã„ã¦ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°å¯èƒ½ãªä¸€æ™‚å·®ç•°ã¯ã„ã¤ã¾ã§è¨ˆä¸Šå¯èƒ½ã§ã™ã‹ï¼Ÿ",
                    options: ["1å¹´ä»¥å†…", "5å¹´ä»¥å†…", "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°å¯èƒ½ãªå…¨æœŸé–“", "è¨ˆä¸Šã§ããªã„"],
                    correct: 2,
                    explanation: "ã€Œåˆ†é¡2ï¼ˆæ¥­ç¸¾ãŒå®‰å®šã—ã¦ã„ã‚‹ä¼æ¥­ï¼‰ã€ã®å ´åˆã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°å¯èƒ½ãªå°†æ¥æ¸›ç®—ä¸€æ™‚å·®ç•°ã«ã¤ã„ã¦ã¯ã€æœŸé–“åˆ¶é™ãªãï¼ˆå…¨æœŸé–“ï¼‰å›åå¯èƒ½æ€§ãŒã‚ã‚‹ã¨åˆ¤æ–­ã•ã‚Œã¾ã™ã€‚"
                }
            ],
            'Management': [
                {
                    level: 1,
                    q: "CVPåˆ†æ: æç›Šåˆ†å²ç‚¹å£²ä¸Šé«˜ã‚’æ±‚ã‚ã‚‹è¨ˆç®—å¼ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["å›ºå®šè²» Ã· è²¢çŒ®åˆ©ç›Šç‡", "å›ºå®šè²» Ã· å¤‰å‹•è²»ç‡", "å¤‰å‹•è²» Ã· å£²ä¸Šé«˜", "åˆ©ç›Š Ã· å£²ä¸Šé«˜"],
                    correct: 0,
                    explanation: "æç›Šåˆ†å²ç‚¹å£²ä¸Šé«˜ ï¼ å›ºå®šè²» Ã· (1 ï¼ å¤‰å‹•è²»ç‡) ï¼ å›ºå®šè²» Ã· è²¢çŒ®åˆ©ç›Šç‡ ã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "åŸä¾¡ã®åˆ†é¡: ã€Œç´ ä¾¡ (Prime Cost)ã€ã‚’æ§‹æˆã™ã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["ç›´æ¥ææ–™è²» ï¼‹ ç›´æ¥åŠ´å‹™è²»", "ç›´æ¥åŠ´å‹™è²» ï¼‹ è£½é€ é–“æ¥è²»", "ç›´æ¥ææ–™è²» ï¼‹ è£½é€ é–“æ¥è²»", "è²©å£²è²»åŠã³ä¸€èˆ¬ç®¡ç†è²»"],
                    correct: 0,
                    explanation: "ç´ ä¾¡ï¼ˆPrime Costï¼‰ã¯ã€ç›´æ¥ææ–™è²»ã¨ç›´æ¥åŠ´å‹™è²»ã®åˆè¨ˆã§ã™ã€‚ï¼ˆåŠ å·¥è²» ï¼ ç›´æ¥åŠ´å‹™è²» ï¼‹ è£½é€ é–“æ¥è²»ï¼‰"
                },
                {
                    level: 1,
                    q: "æ¨™æº–åŸä¾¡è¨ˆç®—: å®Ÿéš›æ¶ˆè²»é‡ãŒæ¨™æº–æ¶ˆè²»é‡ã‚’ä¸Šå›ã£ãŸå ´åˆã«ç™ºç”Ÿã™ã‚‹å·®ç•°ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["æœ‰åˆ©æ•°é‡å·®ç•°", "ä¸åˆ©æ•°é‡å·®ç•°", "æœ‰åˆ©ä¾¡æ ¼å·®ç•°", "ä¸åˆ©ä¾¡æ ¼å·®ç•°"],
                    correct: 1,
                    explanation: "æ¨™æº–ã‚ˆã‚Šã‚‚å¤šãã®æ•°é‡ã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã£ãŸå ´åˆã¯ã€ã‚³ã‚¹ãƒˆå¢—ã¨ãªã‚‹ãŸã‚ã€Œä¸åˆ©å·®ç•°ï¼ˆUnfavorableï¼‰ã€ã¨ãªã‚Šã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ç›´æ¥åŸä¾¡è¨ˆç®—: å›ºå®šè£½é€ é–“æ¥è²»ã¯ã©ã®ã‚ˆã†ã«å‡¦ç†ã•ã‚Œã¾ã™ã‹ï¼Ÿ",
                    options: ["è£½å“åŸä¾¡ã¨ã—ã¦å‡¦ç†", "æœŸé–“åŸä¾¡ã¨ã—ã¦å‡¦ç†", "è³‡ç”£ã¨ã—ã¦è¨ˆä¸Š", "è² å‚µã¨ã—ã¦è¨ˆä¸Š"],
                    correct: 1,
                    explanation: "ç›´æ¥åŸä¾¡è¨ˆç®—ã§ã¯ã€å›ºå®šè£½é€ é–“æ¥è²»ã¯ç™ºç”Ÿæ™‚ã«ã€ŒæœŸé–“åŸä¾¡ã€ã¨ã—ã¦å…¨é¡è²»ç”¨å‡¦ç†ã•ã‚Œã¾ã™ï¼ˆCVPåˆ†æã«æœ‰ç”¨ï¼‰ã€‚"
                },
                {
                    level: 1,
                    q: "åŸä¾¡è¨ˆç®—åŸºæº–: åŸä¾¡è¨ˆç®—åŸºæº–ã«ãŠã„ã¦ã€åŸä¾¡è¨ˆç®—ã®ç›®çš„ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã¦ã„ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["è²¡å‹™è«¸è¡¨ã®ä½œæˆ", "åŸä¾¡ç®¡ç†", "äºˆç®—çµ±åˆ¶", "å¾“æ¥­å“¡çµ¦ä¸ã®è¨ˆç®—"],
                    correct: 3,
                    explanation: "åŸä¾¡è¨ˆç®—åŸºæº–ã«ã¯ã€è²¡å‹™è«¸è¡¨ä½œæˆã€ä¾¡æ ¼è¨ˆç®—ã€åŸä¾¡ç®¡ç†ã€äºˆç®—ç®¡ç†ã€åŸºæœ¬è¨ˆç”»ç­–å®šã®5ã¤ã®ç›®çš„ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€çµ¦ä¸è¨ˆç®—ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚"
                },
                {
                    level: 1,
                    q: "ABC (æ´»å‹•åŸºæº–åŸä¾¡è¨ˆç®—): è£½é€ é–“æ¥è²»ã‚’è£½å“ã«é…è³¦ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹åŸºæº–ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: ["æ“æ¥­åº¦", "ã‚³ã‚¹ãƒˆãƒ»ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ (æ´»å‹•åŸä¾¡è¦å› )", "ç›´æ¥ä½œæ¥­æ™‚é–“", "æ©Ÿæ¢°ç¨¼åƒæ™‚é–“"],
                    correct: 1,
                    explanation: "ABCã§ã¯ã€è£½é€ é–“æ¥è²»ã‚’æ´»å‹•ã”ã¨ã«æŠŠæ¡ã—ã€ãã‚Œãã‚Œã®æ´»å‹•ã®ç™ºç”Ÿè¦å› ã§ã‚ã‚‹ã€Œã‚³ã‚¹ãƒˆãƒ»ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã€ã«åŸºã¥ã„ã¦è£½å“ã«é…è³¦ã—ã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "æŠ•è³‡ã®çµŒæ¸ˆæ€§è¨ˆç®—: ROI (æŠ•ä¸‹è³‡æœ¬åˆ©ç›Šç‡) ã‚’æ±‚ã‚ã‚‹è¨ˆç®—å¼ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["åˆ©ç›Š Ã· å£²ä¸Šé«˜", "å£²ä¸Šé«˜ Ã· æŠ•ä¸‹è³‡æœ¬", "åˆ©ç›Š Ã· æŠ•ä¸‹è³‡æœ¬", "æŠ•ä¸‹è³‡æœ¬ Ã· åˆ©ç›Š"],
                    correct: 2,
                    explanation: "ROI (Return On Investment) ã¯ã€åˆ©ç›Šã‚’æŠ•ä¸‹è³‡æœ¬ã§å‰²ã£ã¦ç®—å‡ºã—ã¾ã™ï¼ˆROI = å£²ä¸Šé«˜åˆ©ç›Šç‡ Ã— è³‡æœ¬å›è»¢ç‡ï¼‰ã€‚"
                },
                {
                    level: 2,
                    q: "CVPåˆ†æ: å›ºå®šè²»1,000ã€å¤‰å‹•è²»ç‡0.6ã€ç›®æ¨™åˆ©ç›Š200ã®å ´åˆã€ç›®æ¨™å£²ä¸Šé«˜ã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ",
                    options: ["2,000", "3,000", "2,500", "1,200"],
                    correct: 1,
                    explanation: "ç›®æ¨™å£²ä¸Šé«˜ ï¼ (å›ºå®šè²» ï¼‹ ç›®æ¨™åˆ©ç›Š) Ã· (1 ï¼ å¤‰å‹•è²»ç‡) ï¼ (1000 + 200) Ã· 0.4 ï¼ 3000 ã§ã™ã€‚"
                }
            ],
            'Audit': [
                {
                    level: 1,
                    q: "ç›£æŸ»ãƒªã‚¹ã‚¯: ç›£æŸ»ãƒªã‚¹ã‚¯ãƒ»ãƒ¢ãƒ‡ãƒ«ã®æ§‹æˆè¦ç´ ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["å›ºæœ‰ãƒªã‚¹ã‚¯ Ã— çµ±åˆ¶ãƒªã‚¹ã‚¯ Ã— ç™ºè¦‹ãƒªã‚¹ã‚¯", "ãƒ“ã‚¸ãƒã‚¹ãƒªã‚¹ã‚¯ Ã— ç›£æŸ»ãƒªã‚¹ã‚¯", "é‡è¦æ€§ Ã— ãƒªã‚¹ã‚¯", "æŠ½å‡ºãƒªã‚¹ã‚¯ Ã— éæŠ½å‡ºãƒªã‚¹ã‚¯"],
                    correct: 0,
                    explanation: "ç›£æŸ»ãƒªã‚¹ã‚¯ ï¼ é‡è¦ãªè™šå½è¡¨ç¤ºãƒªã‚¹ã‚¯ï¼ˆå›ºæœ‰ãƒªã‚¹ã‚¯Ã—çµ±åˆ¶ãƒªã‚¹ã‚¯ï¼‰ Ã— ç™ºè¦‹ãƒªã‚¹ã‚¯ ã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ç‹¬ç«‹æ€§: ã€Œå¤–è¦³çš„ç‹¬ç«‹æ€§ã€ã‚’æãªã†è¦å› ã¨ãªã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["è¢«ç›£æŸ»ä¼šç¤¾ã®æ ªå¼ä¿æœ‰", "èª å®Ÿã§ã‚ã‚‹ã“ã¨", "å°‚é–€èƒ½åŠ›ã‚’æœ‰ã™ã‚‹ã“ã¨", "å€«ç†è¦å®šã®éµå®ˆ"],
                    correct: 0,
                    explanation: "è¢«ç›£æŸ»ä¼šç¤¾ã®æ ªå¼ã‚„é‡è¦ãªçµŒæ¸ˆçš„åˆ©å®³é–¢ä¿‚ã‚’æœ‰ã™ã‚‹ã“ã¨ã¯ã€å¤–è¦³çš„ç‹¬ç«‹æ€§ï¼ˆç¬¬ä¸‰è€…ã‹ã‚‰è¦‹ã¦ç‹¬ç«‹ã—ã¦ã„ã‚‹ã¨è¦‹ãˆã‚‹ã“ã¨ï¼‰ã‚’æãªã„ã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ç›£æŸ»æ„è¦‹: è²¡å‹™è«¸è¡¨å…¨ä½“ã«é‡è¦ãªè™šå½è¡¨ç¤ºãŒã‚ã‚Šã€ã‹ã¤ãã®å½±éŸ¿ãŒåºƒç¯„ã§ã‚ã‚‹å ´åˆã«è¡¨æ˜ã•ã‚Œã‚‹æ„è¦‹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["ç„¡é™å®šé©æ­£æ„è¦‹", "é™å®šä»˜é©æ­£æ„è¦‹", "ä¸é©æ­£æ„è¦‹", "æ„è¦‹ä¸è¡¨æ˜"],
                    correct: 2,
                    explanation: "é‡è¦ã‹ã¤åºƒç¯„ï¼ˆPervasiveï¼‰ãªè™šå½è¡¨ç¤ºãŒã‚ã‚‹å ´åˆã¯ã€ã€Œä¸é©æ­£æ„è¦‹ï¼ˆAdverse Opinionï¼‰ã€ãŒè¡¨æ˜ã•ã‚Œã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "å†…éƒ¨çµ±åˆ¶: å†…éƒ¨çµ±åˆ¶ã®æ•´å‚™ãƒ»é‹ç”¨è²¬ä»»ã¯èª°ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                    options: ["ç›£æŸ»äºº", "çµŒå–¶è€…", "æ ªä¸»", "æ”¿åºœ"],
                    correct: 1,
                    explanation: "å†…éƒ¨çµ±åˆ¶ã‚’æ•´å‚™ã—é‹ç”¨ã™ã‚‹è²¬ä»»ã¯ã€ŒçµŒå–¶è€…ã€ã«ã‚ã‚Šã¾ã™ã€‚ç›£æŸ»äººã¯ãã®æœ‰åŠ¹æ€§ã‚’è©•ä¾¡ãƒ»å ±å‘Šã™ã‚‹ç«‹å ´ã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ç›£æŸ»è¨¼æ‹ : ä¸€èˆ¬çš„ã«æœ€ã‚‚è¨¼æ˜åŠ›ãŒé«˜ã„ã¨ã•ã‚Œã‚‹ç›£æŸ»è¨¼æ‹ ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["çµŒå–¶è€…ã¸ã®è³ªå•", "è¦³å¯Ÿ", "å¤–éƒ¨ç¢ºèª", "ç¤¾å†…æ–‡æ›¸"],
                    correct: 2,
                    explanation: "å¤–éƒ¨ã®ç¬¬ä¸‰è€…ã‹ã‚‰ç›´æ¥å…¥æ‰‹ã™ã‚‹ã€Œç¢ºèªï¼ˆExternal Confirmationï¼‰ã€ã¯ã€ä¸€èˆ¬ã«ç¤¾å†…è¨¼æ‹ ã‚ˆã‚Šã‚‚è¨¼æ˜åŠ›ãŒé«˜ã„ã¨ã•ã‚Œã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ä¸æ­£å¯¾å¿œ: ã€Œä¸æ­£ã®ãƒˆãƒ©ã‚¤ã‚¢ãƒ³ã‚°ãƒ«ã€ã®3è¦ç´ ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["å‹•æ©Ÿãƒ»ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼", "æ©Ÿä¼š", "å§¿å‹¢ãƒ»æ­£å½“åŒ–", "ç½°å‰‡"],
                    correct: 3,
                    explanation: "ä¸æ­£ã®ãƒˆãƒ©ã‚¤ã‚¢ãƒ³ã‚°ãƒ«ã¯ã€ã€Œå‹•æ©Ÿãƒ»ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã€ã€Œæ©Ÿä¼šã€ã€Œå§¿å‹¢ãƒ»æ­£å½“åŒ–ã€ã®3è¦ç´ ã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ç›£æŸ»å ±å‘Šæ›¸: ç›£æŸ»å ±å‘Šæ›¸æ—¥ã¯ã„ã¤ã§ã‚ã‚‹ã¹ãã§ã™ã‹ï¼Ÿ",
                    options: ["æ±ºç®—æ—¥", "ç›£æŸ»äººãŒç›£æŸ»æ„è¦‹ã‚’å½¢æˆã™ã‚‹ã®ã«ååˆ†ã‹ã¤é©åˆ‡ãªç›£æŸ»è¨¼æ‹ ã‚’å…¥æ‰‹ã—ãŸæ—¥", "æ ªä¸»ç·ä¼šé–‹å‚¬æ—¥", "æœ‰ä¾¡è¨¼åˆ¸å ±å‘Šæ›¸æå‡ºæ—¥"],
                    correct: 1,
                    explanation: "ç›£æŸ»å ±å‘Šæ›¸æ—¥ã¯ã€ç›£æŸ»äººãŒæ„è¦‹è¡¨æ˜ã®åŸºç¤ã¨ãªã‚‹ååˆ†ã‹ã¤é©åˆ‡ãªç›£æŸ»è¨¼æ‹ ã‚’å…¥æ‰‹ã—ãŸæ—¥ï¼ˆç›£æŸ»çµ‚äº†æ—¥ï¼‰ã¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"
                }
            ],
            'Company': [
                {
                    level: 1,
                    q: "è¨­ç«‹: æ ªå¼ä¼šç¤¾ã®è¨­ç«‹ã«ãŠã‘ã‚‹æœ€ä½è³‡æœ¬é‡‘ã®é¡ã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ",
                    options: ["1,000ä¸‡å††", "300ä¸‡å††", "1å††", "0å††"],
                    correct: 2,
                    explanation: "ç¾åœ¨ã®ä¼šç¤¾æ³•ã§ã¯ã€æœ€ä½è³‡æœ¬é‡‘åˆ¶åº¦ã¯æ’¤å»ƒã•ã‚Œã¦ãŠã‚Šã€è³‡æœ¬é‡‘1å††ã‹ã‚‰è¨­ç«‹ãŒå¯èƒ½ã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "è‡ªå·±æ ªå¼: æ ªå¼ä¼šç¤¾ã¯è‡ªå·±æ ªå¼ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã‹ï¼Ÿ",
                    options: ["å®Œå…¨ã«ç¦æ­¢ã•ã‚Œã¦ã„ã‚‹", "è²¡æºè¦åˆ¶ç­‰ã®ä¸‹ã§èªã‚ã‚‰ã‚Œã‚‹", "è‡ªç”±ã«èªã‚ã‚‰ã‚Œã‚‹", "è§£æ•£æ™‚ã®ã¿èªã‚ã‚‰ã‚Œã‚‹"],
                    correct: 1,
                    explanation: "è‡ªå·±æ ªå¼ã®å–å¾—ã¯ã€åˆ†é…å¯èƒ½é¡ã®ç¯„å›²å†…ã§ã‚ã‚‹ã“ã¨ã‚„æ ªä¸»ç·ä¼šæ±ºè­°ãªã©ã®è¦åˆ¶ã®ä¸‹ã§èªã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"
                },
                {
                    level: 1,
                    q: "æ©Ÿé–¢è¨­è¨ˆ: å–ç· å½¹ä¼šè¨­ç½®ä¼šç¤¾ã«ãŠã‘ã‚‹å–ç· å½¹ã®æœ€ä½äººæ•°ã¯ä½•äººã§ã™ã‹ï¼Ÿ",
                    options: ["1äºº", "2äºº", "3äºº", "5äºº"],
                    correct: 2,
                    explanation: "å–ç· å½¹ä¼šã‚’è¨­ç½®ã™ã‚‹å ´åˆã€å–ç· å½¹ã¯3äººä»¥ä¸Šå¿…è¦ã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "æ ªä¸»ç·ä¼š: ç‰¹åˆ¥æ±ºè­°ã®å®šè¶³æ•°ã¯åŸå‰‡ã¨ã—ã¦ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ",
                    options: ["è­°æ±ºæ¨©ã®éåŠæ•°", "è­°æ±ºæ¨©ã®3åˆ†ã®1", "è­°æ±ºæ¨©ã®3åˆ†ã®2", "å…¨æ ªä¸»"],
                    correct: 0,
                    explanation: "ç‰¹åˆ¥æ±ºè­°ã®å®šè¶³æ•°ã¯åŸå‰‡ã¨ã—ã¦ã€Œè­°æ±ºæ¨©ã®éåŠæ•°ã€ã§ã™ï¼ˆå®šæ¬¾ã§3åˆ†ã®1ã¾ã§ç·©å’Œå¯ï¼‰ã€‚æ±ºè­°è¦ä»¶ã¯å‡ºå¸­æ ªä¸»ã®è­°æ±ºæ¨©ã®3åˆ†ã®2ä»¥ä¸Šã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "ç›£æŸ»å½¹: ç›£æŸ»å½¹ã®ä»»æœŸã¯åŸå‰‡ã¨ã—ã¦ä½•å¹´ã§ã™ã‹ï¼Ÿ",
                    options: ["1å¹´", "2å¹´", "4å¹´", "10å¹´"],
                    correct: 2,
                    explanation: "ç›£æŸ»å½¹ã®ä»»æœŸã¯åŸå‰‡ã¨ã—ã¦4å¹´ã§ã™ã€‚å®šæ¬¾ã«ã‚ˆã£ã¦ã‚‚çŸ­ç¸®ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚"
                },
                {
                    level: 1,
                    q: "æ ªä¸»ã®æ¨©åˆ©: å˜ç‹¬æ ªä¸»æ¨©ï¼ˆ1æ ªã§ã‚‚ä¿æœ‰ã—ã¦ã„ã‚Œã°è¡Œä½¿ã§ãã‚‹æ¨©åˆ©ï¼‰ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["æ ªä¸»ç·ä¼šæ‹›é›†è«‹æ±‚æ¨©", "å¸³ç°¿é–²è¦§è«‹æ±‚æ¨©", "å‰°ä½™é‡‘é…å½“è«‹æ±‚æ¨©", "å–ç· å½¹è§£ä»»è«‹æ±‚æ¨©"],
                    correct: 2,
                    explanation: "å‰°ä½™é‡‘é…å½“è«‹æ±‚æ¨©ã‚„è­°æ±ºæ¨©ã¯ã€1æ ªã‹ã‚‰èªã‚ã‚‰ã‚Œã‚‹å˜ç‹¬æ ªä¸»æ¨©ã§ã™ã€‚å¸³ç°¿é–²è¦§æ¨©ãªã©ã¯ä¸€å®šã®æ ªå¼æ•°ãƒ»æœŸé–“ãŒå¿…è¦ãªå°‘æ•°æ ªä¸»æ¨©ã§ã™ã€‚"
                },
                {
                    level: 1,
                    q: "äº‹æ¥­è­²æ¸¡: æ ªä¸»ç·ä¼šã®ç‰¹åˆ¥æ±ºè­°ãŒå¿…è¦ã¨ãªã‚‹äº‹æ¥­è­²æ¸¡ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["äº‹æ¥­ã®å…¨éƒ¨ã¾ãŸã¯é‡è¦ãªä¸€éƒ¨ã®è­²æ¸¡", "é‡è¦ãªè³‡ç”£ã®å‡¦åˆ†", "å¤šé¡ã®å€Ÿè²¡", "æ”¯é…äººã®é¸ä»»"],
                    correct: 0,
                    explanation: "äº‹æ¥­ã®å…¨éƒ¨ã®è­²æ¸¡ã€ã¾ãŸã¯äº‹æ¥­ã®é‡è¦ãªä¸€éƒ¨ã®è­²æ¸¡ï¼ˆè­²æ¸¡è³‡ç”£ãŒç·è³‡ç”£ã®1/5è¶…ãªã©ï¼‰ã«ã¯ã€æ ªä¸»ç·ä¼šã®ç‰¹åˆ¥æ±ºè­°ãŒå¿…è¦ã§ã™ã€‚"
                }
            ]
        };

        const vocabData = {
            'Financial': [
                { term: 'Going Concern', jp: 'ç¶™ç¶šä¼æ¥­ã®å‰æ', desc: 'ä¼æ¥­ãŒå°†æ¥ã«ã‚ãŸã£ã¦äº‹æ¥­ã‚’ç¶™ç¶šã™ã‚‹ã¨ã„ã†å‰æã€‚' },
                { term: 'Accrual Basis', jp: 'ç™ºç”Ÿä¸»ç¾©', desc: 'ç¾é‡‘ã®åæ”¯ã«ã‹ã‹ã‚ã‚‰ãšã€çµŒæ¸ˆçš„äº‹è±¡ã®ç™ºç”Ÿæ™‚ç‚¹ã§åç›Šãƒ»è²»ç”¨ã‚’èªè­˜ã™ã‚‹åŸå‰‡ã€‚' },
                { term: 'Materiality', jp: 'é‡è¦æ€§', desc: 'è²¡å‹™è«¸è¡¨åˆ©ç”¨è€…ã®æ„æ€æ±ºå®šã«å½±éŸ¿ã‚’ä¸ãˆã‚‹æƒ…å ±ã®æ€§è³ªã‚„é‡‘é¡ã®å¤§ãã•ã€‚' },
                { term: 'Impairment', jp: 'æ¸›æ', desc: 'è³‡ç”£ã®åç›Šæ€§ãŒä½ä¸‹ã—ãŸçµæœã€æŠ•è³‡é¡ã®å›åãŒè¦‹è¾¼ã‚ãªããªã£ãŸå ´åˆã«å¸³ç°¿ä¾¡é¡ã‚’æ¸›é¡ã™ã‚‹ã“ã¨ã€‚' },
                { term: 'Asset Retirement Obligation', jp: 'è³‡ç”£é™¤å»å‚µå‹™', desc: 'æœ‰å½¢å›ºå®šè³‡ç”£ã®å–å¾—ã‚„ä½¿ç”¨ã«ã‚ˆã£ã¦ç”Ÿã˜ã‚‹ã€é™¤å»ã«é–¢ã™ã‚‹å°†æ¥ã®æ³•çš„ç¾©å‹™ã€‚' }
            ],
            'Management': [
                { term: 'Opportunity Cost', jp: 'æ©Ÿä¼šåŸä¾¡', desc: 'ã‚ã‚‹ä»£æ›¿æ¡ˆã‚’é¸æŠã—ãŸã“ã¨ã«ã‚ˆã£ã¦çŠ ç‰²ã¨ãªã£ãŸï¼ˆè«¦ã‚ãŸï¼‰æœ€å¤§ã®åˆ©ç›Šã€‚' },
                { term: 'Sunk Cost', jp: 'åŸ‹æ²¡åŸä¾¡', desc: 'éå»ã®æ„æ€æ±ºå®šã«ã‚ˆã£ã¦æ—¢ã«ç™ºç”Ÿã—ã€å›åä¸èƒ½ãªã‚³ã‚¹ãƒˆã€‚æ„æ€æ±ºå®šã§ã¯ç„¡è¦–ã™ã¹ãã€‚' },
                { term: 'Break-even Point', jp: 'æç›Šåˆ†å²ç‚¹', desc: 'å£²ä¸Šé«˜ã¨ç·è²»ç”¨ãŒç­‰ã—ããªã‚Šã€åˆ©ç›ŠãŒã‚¼ãƒ­ã¨ãªã‚‹ç‚¹ã€‚' },
                { term: 'Safety Margin', jp: 'å®‰å…¨ä½™è£•ç‡', desc: 'ç¾åœ¨ã®å£²ä¸Šé«˜ãŒæç›Šåˆ†å²ç‚¹ã‚’ã©ã‚Œã ã‘ä¸Šå›ã£ã¦ã„ã‚‹ã‹ã‚’ç¤ºã™æŒ‡æ¨™ã€‚é«˜ã„ã»ã©å®‰å…¨ã€‚' },
                { term: 'Cost Driver', jp: 'ã‚³ã‚¹ãƒˆãƒ»ãƒ‰ãƒ©ã‚¤ãƒãƒ¼', desc: 'æ´»å‹•åŸä¾¡è¨ˆç®—ï¼ˆABCï¼‰ã«ãŠã„ã¦ã€ã‚³ã‚¹ãƒˆç™ºç”Ÿã®åŸå› ã¨ãªã‚‹æ´»å‹•é‡ã‚„è¦å› ã€‚' }
            ],
            'Audit': [
                { term: 'Professional Skepticism', jp: 'è·æ¥­çš„æ‡ç–‘å¿ƒ', desc: 'å¸¸ã«ç–‘å¿µã‚’æŒã¡ã€ç›£æŸ»è¨¼æ‹ ã‚’æ‰¹åˆ¤çš„ã«è©•ä¾¡ã™ã‚‹å§¿å‹¢ã€‚' },
                { term: 'Audit Risk', jp: 'ç›£æŸ»ãƒªã‚¹ã‚¯', desc: 'è²¡å‹™è«¸è¡¨ã«é‡è¦ãªè™šå½è¡¨ç¤ºãŒã‚ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ç›£æŸ»äººãŒä¸é©åˆ‡ãªæ„è¦‹ã‚’è¡¨æ˜ã™ã‚‹ãƒªã‚¹ã‚¯ã€‚' },
                { term: 'Material Misstatement', jp: 'é‡è¦ãªè™šå½è¡¨ç¤º', desc: 'è²¡å‹™è«¸è¡¨åˆ©ç”¨è€…ã®åˆ¤æ–­ã‚’èª¤ã‚‰ã›ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹èª¤ã‚Šã‚„ä¸æ­£ã€‚' },
                { term: 'Internal Control', jp: 'å†…éƒ¨çµ±åˆ¶', desc: 'æ¥­å‹™ã®æœ‰åŠ¹æ€§ãƒ»åŠ¹ç‡æ€§ã€è²¡å‹™å ±å‘Šã®ä¿¡é ¼æ€§ãªã©ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«çµ„ç¹”å†…ã«æ§‹ç¯‰ã•ã‚Œã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã€‚' },
                { term: 'Substantive Procedures', jp: 'å®Ÿè¨¼æ‰‹ç¶š', desc: 'é‡è¦ãªè™šå½è¡¨ç¤ºã‚’ç™ºè¦‹ã™ã‚‹ãŸã‚ã«ã€å–å¼•ã‚„æ®‹é«˜ã®è©³ç´°ã‚’ç›´æ¥æ¤œè¨¼ã™ã‚‹æ‰‹ç¶šã€‚' }
            ],
            'Company': [
                { term: 'Fiduciary Duty', jp: 'å—è¨—è€…è²¬ä»»', desc: 'å–ç· å½¹ãªã©ãŒä¼šç¤¾ã‚„æ ªä¸»ã®ãŸã‚ã«å¿ å®Ÿã«è·å‹™ã‚’é‚è¡Œã™ã‚‹ç¾©å‹™ï¼ˆå–„ç®¡æ³¨æ„ç¾©å‹™ãƒ»å¿ å®Ÿç¾©å‹™ï¼‰ã€‚' },
                { term: 'Shareholder Derivative Suit', jp: 'æ ªä¸»ä»£è¡¨è¨´è¨Ÿ', desc: 'ä¼šç¤¾ãŒå–ç· å½¹ã®è²¬ä»»ã‚’è¿½åŠã—ãªã„å ´åˆã«ã€æ ªä¸»ãŒä¼šç¤¾ã«ä»£ã‚ã£ã¦æèµ·ã™ã‚‹è¨´è¨Ÿã€‚' },
                { term: 'Business Judgment Rule', jp: 'çµŒå–¶åˆ¤æ–­ã®åŸå‰‡', desc: 'å–ç· å½¹ã®çµŒå–¶åˆ¤æ–­ãŒåˆç†çš„ã§èª å®Ÿã«è¡Œã‚ã‚ŒãŸå ´åˆã€çµæœçš„ã«æå®³ãŒç”Ÿã˜ã¦ã‚‚è²¬ä»»ã‚’å•ã‚ã‚Œãªã„åŸå‰‡ã€‚' },
                { term: 'Authorized Shares', jp: 'ç™ºè¡Œå¯èƒ½æ ªå¼ç·æ•°', desc: 'å®šæ¬¾ã§å®šã‚ã‚‰ã‚ŒãŸã€ä¼šç¤¾ãŒç™ºè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹æ ªå¼ã®ä¸Šé™æ•°ã€‚' },
                { term: 'Treasury Stock', jp: 'è‡ªå·±æ ªå¼', desc: 'ä¼šç¤¾ãŒä¿æœ‰ã™ã‚‹è‡ªç¤¾ã®æ ªå¼ã€‚è­°æ±ºæ¨©ã‚„é…å½“è«‹æ±‚æ¨©ã¯ãªã„ã€‚' }
            ]
        };

        let currentQuiz = {
            subject: null,
            questions: [],
            index: 0,
            score: 0
        };
        
        let currentSubject = null;

        function selectSubject(subject) {
            currentSubject = subject;
            document.getElementById('quiz-intro').classList.add('hidden');
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('level-selection').classList.remove('hidden');
            document.getElementById('level-select-title').textContent = `${subject}: Select Level`;
        }

        function startQuiz(subject, level = null) {
            const subj = subject || currentSubject;
            currentQuiz.subject = subj;
            
            let questions = [];

            if (level === 'vocab') {
                const vocabList = vocabData[subj] || [];
                if (vocabList.length === 0) {
                     alert(`No vocabulary for ${subj} yet.`);
                     return;
                }
                questions = vocabList.map(v => ({
                    q: `ã€é‡è¦èªå¥ã€‘ ã€Œ${v.term}ã€ ã®æ„å‘³ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ï¼Ÿ`,
                    options: [v.desc, "ï¼ˆèª¤ã‚Šã®é¸æŠè‚¢: é€†ã®æ„å‘³ï¼‰", "ï¼ˆèª¤ã‚Šã®é¸æŠè‚¢: ç„¡é–¢ä¿‚ãªå®šç¾©ï¼‰", "ï¼ˆèª¤ã‚Šã®é¸æŠè‚¢: é¡ä¼¼ç”¨èªã®å®šç¾©ï¼‰"],
                    correct: 0,
                    explanation: `**${v.term} (${v.jp})**\n\n${v.desc}`,
                    level: 'vocab'
                }));
            } else {
                questions = drillQuestions[subj] || [];
                
                // Filter by level if specified
                if (level) {
                    const leveledQuestions = questions.filter(q => q.level === level);
                    if (leveledQuestions.length > 0) {
                        questions = leveledQuestions;
                    } else if (level === 1) {
                        const legacyQuestions = questions.filter(q => q.level === undefined);
                        if (legacyQuestions.length > 0) {
                            questions = legacyQuestions;
                        } else {
                            // Truly no questions
                            alert(`No questions available for ${subj} yet.`);
                            return;
                        }
                    } else {
                        alert(`Level ${level} questions for ${subj} are coming soon! Please try Level 1.`);
                        return;
                    }
                }
            }
            
            currentQuiz.questions = [...questions]; // Shallow copy
            currentQuiz.index = 0;
            currentQuiz.score = 0;

            document.getElementById('level-selection').classList.add('hidden');
            document.getElementById('quiz-intro').classList.add('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            
            const levelText = level === 'vocab' ? " (Vocabulary)" : (level ? ` (Level ${level})` : "");
            document.getElementById('quiz-subject-title').textContent = subj + " Drill" + levelText;
            
            showQuestion();
        }

        function showQuestion() {
            const q = currentQuiz.questions[currentQuiz.index];
            document.getElementById('quiz-progress').textContent = `Q${currentQuiz.index + 1} / ${currentQuiz.questions.length}`;
            document.getElementById('quiz-question-text').textContent = q.q;
            
            const optsContainer = document.getElementById('quiz-options');
            optsContainer.innerHTML = '';
            
            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-blue-50 hover:border-blue-300 transition option-btn';
                btn.onclick = () => checkAnswer(idx, btn);
                btn.innerHTML = `<span class="font-bold mr-2">${String.fromCharCode(65+idx)}.</span> ${opt}`;
                optsContainer.appendChild(btn);
            });

            document.getElementById('quiz-feedback').classList.add('hidden');
            document.getElementById('btn-next-question').classList.add('hidden');
        }

        function checkAnswer(selectedIndex, btnElement) {
            // Disable all buttons
            document.querySelectorAll('.option-btn').forEach(b => b.disabled = true);
            
            const q = currentQuiz.questions[currentQuiz.index];
            const isCorrect = selectedIndex === q.correct;
            
            if (isCorrect) {
                currentQuiz.score++;
                btnElement.classList.remove('border-gray-200', 'hover:bg-blue-50');
                btnElement.classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                document.getElementById('feedback-title').textContent = "Correct! ğŸ‰";
                document.getElementById('feedback-title').className = "font-bold mb-2 text-green-600";
            } else {
                btnElement.classList.remove('border-gray-200', 'hover:bg-blue-50');
                btnElement.classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                
                // Highlight correct answer
                const correctBtn = document.querySelectorAll('.option-btn')[q.correct];
                correctBtn.classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                
                document.getElementById('feedback-title').textContent = "Incorrect";
                document.getElementById('feedback-title').className = "font-bold mb-2 text-red-600";
            }

            document.getElementById('feedback-text').textContent = q.explanation;
            document.getElementById('quiz-feedback').classList.remove('hidden');
            document.getElementById('btn-next-question').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuiz.index++;
            if (currentQuiz.index < currentQuiz.questions.length) {
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('quiz-result').classList.remove('hidden');
            document.getElementById('quiz-final-score').textContent = `${currentQuiz.score} / ${currentQuiz.questions.length}`;
        }

        function resetQuizUI() {
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('level-selection').classList.add('hidden');
            document.getElementById('quiz-intro').classList.remove('hidden');
        }
    </script>
</body>
</html>
